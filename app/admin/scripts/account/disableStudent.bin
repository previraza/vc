randomize = (length = 4, prefix = "SNEN", separator = "-") => {
    let res = pre_res = '';
    for (let i = 0; i < length; i++) {
        pre_res = parseInt(Math.random() * 35).toString(35)
        res += ((!(i % 4) ? separator : '') + ((Math.random() * 2) > 1 ? pre_res.toUpperCase() : pre_res));
    }
    return prefix + separator + res;
}

function format_number(number = 0, length = 1, complement = 0) {
    let n = number.toString();
    while (n.length < length)
        n = '0' + n;
    return n;
}

$('#GenerateAll').on('click', () => {
    $('.generatorZone').each((i, e) => {
        $.ajax({
            url: "/app/settings/edit/updateProfileS.php?sending_by=mcisme",
            data: {
                CON_47: 'loveStorage',
                user_id: e.dataset.id,
                user_name: e.dataset.name,
                user_pass: format_number(e.dataset.id, 8, 0)
            },
            type: "POST",
            success: function(response) {
                try {
                    let res = JSON.parse(response),
                        res_show = document.getElementById('shodan_res_' + e.dataset.id);
                    res_show.className = (res.status == 'succes') ? 'bg-info text-white' : 'bg-danger text-white';
                    res_show.title = res.content;
                } catch (error) {
                    console.error(response);
                }
            }
        })
    });
});

mci_generator_enc = (id = 0, name = "Undefined", activeModal = true) => {
    $('#submitPreBtn').fadeIn();
    $('.modalMessageTextFooter').text('')
    $('#contentKEY').val(format_number(id, 8, 0));
    $('#contentSSID').val(name);
    $('#modalTitle').text(name);
    $('#contentID').val(id);
    $('#submitFormulary')[0].dataset.id = id;
    $('#modelId').modal();
};

$('#submitFormulary').on('submit', e => {
    e.preventDefault();
    updateProfile(e)
})

updateProfile = e => {
    var data = new FormData(e.currentTarget);
    $.ajax({
        url: "/app/settings/edit/updateProfileS.php?sending_by=mcisme",
        data: data,
        type: "POST",
        contentType: false,
        cache: false,
        processData: false,
        success: function(response) {
            try {
                let res = JSON.parse(response),
                    res_show = document.getElementById('shodan_res_' + e.target.dataset.id);
                if (res.status == 'succes') {
                    $('#submitPreBtn').fadeOut();
                    $('.modalMessageTextFooter').text('Succès !')
                    res_show.className = 'bg-info text-white';
                } else {
                    $('.modalMessageTextFooter').text('Echèc !')
                    res_show.className = 'bg-danger text-white';
                }
            } catch (error) {
                console.error(response);
            }
        }
    })
}